{% extends "layout.html" %}
{% block content %}
<!-- 説明 -->
<h5 class="text-center my-4">
  "Japanese Learners' Font" を使った日本語文字練習プリントを作成するサイトのトライアル版です。<br>
  <span class="text-danger">このページはトライアル版のため、9月13日（日）までといたします。</span>
</h5>

<!-- PDF作成フォーム -->
<div class="card bg-light border-dark">
  <div class="card-body">
    <div class="row">
      <div class="col-6">
        <h4 class="card-title p-3">文字練習用シート(PDF)作成</h4>
        <p class="card-subtitle text-muted mb-3 px-3">下記に入力した文字で、A4サイズの練習シートを作成できます。(A4ヨコにも対応)</p>
      </div>
      <div class="col-4">
        <img src="https://japanse-character-workbook-public.s3-ap-northeast-1.amazonaws.com/images/Yoz.png"
             width="100"
             height="120"
             class="mx-auto d-block"
        >
      </div>
    </div>
    <form method="get" action="{{ url_for('create') }}">
      <div class="form-group px-3">
        <label class="control-label">入力欄</label>
        <input id="LayoutSpecified" class="form-check-input ml-2" type="checkbox" name="layout_specified">
        <label class="form-check-label text-muted ml-4" for="LayoutSpecified">レイアウトを指定</label>
        <input class="form-control" type="text" name="text" placeholder="例: リオネル メッシ">
      </div>
      {% if error %}
      <div class="alert alert-danger mx-3" role="alert" id="error_for_text">{{ error }}</div>
      {% endif %}

      <!-- レイアウト制御 -->
      <div id="LayoutControl" class="form-group px-3" hidden>
        <div class="row">
          <div class="form-check form-check-inline col-10">
            <label class="control-label col-2 my-1">フォントサイズ:</label>
            <div class="col-4">
              <input class="form-check-input" type="radio" name="font-size" id="small-size" value="small" checked>
              <label class="form-check-label" for="small-size" style="font-size: 85%;">
                small(A4タテ10文字 ヨコ15文字まで)
              </label>
            </div>
            <div class="col-4">
              <input class="form-check-input" type="radio" name="font-size" id="middle-size" value="middle">
              <label class="form-check-label" for="middle-size" style="font-size: 85%;">
                middle(A4タテ8文字 ヨコ13文字まで)
              </label>
            </div>
            <div class="col-4">
              <input class="form-check-input" type="radio" name="font-size" id="large-size" value="large">
              <label class="form-check-label" for="large-size" style="font-size: 85%;">
                large(A4タテ6文字 ヨコ10文字まで)
              </label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-check form-check-inline col-10">
            <label class="control-label col-2 my-1">用紙の向き:</label>
            <div class="col-3">
              <input class="form-check-input" type="checkbox" name="horizontal" id="horizontal" value="true">
              <label class="form-check-label" for="horizontal" style="font-size: 92%;">
                ヨコ
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="form-row text-center">
        <div class="col-12">
          <button class="btn btn-primary" type="submit" id="download">ダウンロード</button>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- 教材ダウンロード -->
<div class="card bg-light border-dark mt-4 mb-4">
  <div class="card-body">
    <h4 class="card-title p-3">ひらがな・カタカナ練習教材ダウンロード</h4>
    <div class="row">
      <div class="col-6">
        <ul>
          {% for workbook in workbooks %}
          <li><a href="{{ url_for('download') + '?key=' + workbook.key }}">{{ workbook.name }}</a></li>
          {% endfor %}
        </ul>
      </div>
      <div class="col-4">
        <img src="https://japanse-character-workbook-public.s3-ap-northeast-1.amazonaws.com/images/Toza.png"
             width="100"
             height="120"
             class="mx-auto d-block"
        >
      </div>
    </div>
  </div>
</div>

<!-- アンケートフォーム -->
<div class="card bg-light border-dark mt-4 mb-4">
  <div class="card-body">
    <h4 class="card-title p-3">今後の参考のため、アンケートへのご協力をお願いいたします</h4>
    <div class="row">
      <div class="col-6">
        <ul>
          <li><a href="https://forms.gle/XjMD1KfxWTZQfbcW9">アンケートフォーム</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- リリースノート -->
<div class="card bg-light border-dark mt-4 mb-4">
  <div class="card-body">
    <h4 class="card-title p-3">リリースノート</h4>
    <div class="row">
      <div class="col-12">
        <ul>
          <li><span>レイアウト指定なしの場合、自動にレイアウトを調整する機能を追加 (8/24)</span></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<script>
  (function(){
    // ダウンロードボタンにイベントハンドラを追加
    let download = document.getElementById("download");
    download.addEventListener("click", function() {

      // ダウンロード時にエラーメッセージを消すようにする
      var error = document.getElementById("error_for_text");

      if (error) {
        error.style.display = "none"
      }
    }, false);

    // レイアウト指定チェックボックスにイベントハンドラを追加
    document.getElementById("LayoutSpecified").addEventListener("click", function(e) {

      // チェックせれているかで、可視状態を制御
      if (e.target.checked) {
        document.getElementById("LayoutControl").hidden = false;
      } else {
        document.getElementById("LayoutControl").hidden = true;
      }
    }, false)
  })();
</script>
{% endblock %}
